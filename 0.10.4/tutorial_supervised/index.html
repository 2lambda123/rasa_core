
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Supervised Learning Tutorial</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/banner.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />

 <!-- Google Tag Manager -->
    <script type="opt-in" data-type="application/javascript" data-name="googletagmanager">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-MMHSZCS');</script>
    <!-- End Google Tag Manager -->
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />
  <meta itemprop="image" content="https://rasa.com/assets/img/facebook-og.png">
  <meta property="og:title" content="Supervised Learning Tutorial" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://rasa.com/assets/img/facebook-og.png" />
  <meta property="og:url" content="https://rasa.com/docs/core/tutorial_supervised" />
  
    <meta name="description" content="None" />
    <meta itemprop="description" content="None">
    <meta name="twitter:description" content="None" />
    <meta property="og:description" content="None" />
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Rasa_HQ">
  <meta name="twitter:title" content="Supervised Learning Tutorial">
  <meta name="twitter:creator" content="@Rasa_HQ">
  <meta name="twitter:image" content="https://rasa.com/assets/img/facebook-og.png">

  <link rel="stylesheet" href="../_static/xq-light.css" type="text/css" />
  <link rel="stylesheet" href="../_static/fontawesome/css/fontawesome-all.css" type="text/css" />
  <script defer type="text/javascript" src="../_static/config.js"></script>
  <script defer type="text/javascript" src="../_static/klaro.js"></script>
  <script type="text/javascript" src="https://storage.googleapis.com/docs-theme/clipboard.min.js"></script>
  
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />


  </head><body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe data-name="googletagmanager" data-src="https://www.googletagmanager.com/ns.html?id=GTM-MMHSZCS" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="nav-top">
  <div class="nav-container">
    <a href="/docs" class="brand-link">
        <h1 class="brand">
            <img src="../_static/rasa_logo.svg" width="80px" height="40px" title="Rasa logo" alt="Rasa logo">
        </h1>
        <span class="logo extension">docs</span>
    </a>

    <ul class="nav">
      <input type="text" class="search" placeholder="Search">
      
        
          <li><a href=/docs/nlu/>NLU</a></li>
        
      
        
          <li class="active"><a href=/docs/core/>Core</a></li>
        
      
        
          <li><a href=/docs/platform/>Platform</a></li>
        
      

      <li>
        <a href="https://github.com/rasaHQ/" target="_blank"><button class="button btn-ghost btn-small"> <i class="fab fa-github"></i>GitHub</button></a>
      </li>

      <li>
        <a href="https://forum.rasa.com" target="_blank"><button class="button btn-small">Ask the Community</button></a>
      </li>

    </ul>
  </div>
</div>

  <div class="sidebar-extended"></div>
  <div class="document">

    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../architecture/">High-Level Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connectors/">Chat &amp; Voice platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customactions/">Custom Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slots/">Using Slots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slotfilling/">Slot Filling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../responses/">Bot Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive_learning/">Interactive Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fallbacks/">Fallback Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../policies/">Training and Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debugging/">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../evaluation/">Evaluating and Testing</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../domains/">Domain Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stories/">Story Data Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/slots_api/">Slot Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/">Server Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http/">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/agent/">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/events/">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/tracker/">Dialogue State Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/interpreter/">Interpreters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/policy/">Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/featurizer/">Featurization</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../migrations/">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/">Change Log</a></li>
</ul>

<div class="versions">
    <p class="caption">Versions</p>
    <div class="versions-content">
      <div>
        <span class="current-version">
          viewing: 0.10.4
        </span>
      </div>
      <div class="other-versions">
          <p>tags</p>
          <div class="dropdown-content">
              <a href="../../0.14.3/index/">0.14.3</a>
              <a href="../../0.14.2/index/">0.14.2</a>
              <a href="../../0.14.1/index/">0.14.1</a>
              <a href="../../0.14.0/index/">0.14.0</a>
              <a href="../../0.13.8/index/">0.13.8</a>
              <a href="../../0.13.7/index/">0.13.7</a>
              <a href="../../0.13.6/index/">0.13.6</a>
              <a href="../../0.13.5/index/">0.13.5</a>
              <a href="../../0.13.4/index/">0.13.4</a>
              <a href="../../0.13.3/index/">0.13.3</a>
              <a href="../../0.13.2/index/">0.13.2</a>
              <a href="../../0.13.1/index/">0.13.1</a>
              <a href="../../0.13.0/index/">0.13.0</a>
              <a href="../../0.12.4/index/">0.12.4</a>
              <a href="../../0.12.3/index/">0.12.3</a>
              <a href="../../0.12.2/index/">0.12.2</a>
              <a href="../../0.12.1/index/">0.12.1</a>
              <a href="../../0.12.0/index/">0.12.0</a>
              <a href="../../0.11.12/index/">0.11.12</a>
              <a href="../../0.10.4/tutorial_supervised/">0.10.4</a>
              <a href="../../0.9.8/tutorial_supervised/">0.9.8</a>
              <a href="../../0.8.6/tutorial_supervised/">0.8.6</a>
              <a href="../../0.7.9/tutorial_supervised/">0.7.9</a>
              <a href="../../0.6.9/index/">0.6.9</a>
          </div>
          <p>branches</p>
          <div class="dropdown-content">
              <a href="../../master/index/">master</a>
          </div>
      </div>
    </div>
</div>


        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  


    
    



    <p class="scv-banner"><b>Warning:</b> This document is for an old version of Rasa Core.</p>
<div class="section" id="supervised-learning-tutorial">
<span id="tutorial-supervised"></span><h1>Supervised Learning Tutorial<a class="headerlink" href="#supervised-learning-tutorial" title="Permalink to this headline">Â¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This tutorial will cover how to use Rasa Core directly from python. We will
dive a bit deeper into the different concepts and overall structure of the
library. You should already be familiar with the terms domain, stories, and
have some knowledge of NLU (if not,
head <span class="xref std std-ref">tutorial_basics</span> first).
Here, weâll be using the <a class="reference external" href="https://github.com/RasaHQ/rasa_core/tree/master/examples/restaurantbot">Example Code on GitHub</a>.</p>
</div>
<div class="section" id="goal">
<h2>Goal<a class="headerlink" href="#goal" title="Permalink to this headline">Â¶</a></h2>
<p>In this example we will create a restaurant search bot by training a
neural network on example conversations. A user can contact the bot with
something close to <code class="docutils literal notranslate"><span class="pre">&quot;I</span> <span class="pre">want</span> <span class="pre">a</span> <span class="pre">mexican</span> <span class="pre">restaurant!&quot;</span></code> and the bot will ask
more details until it is ready to suggest a restaurant.</p>
</div>
<div class="section" id="first-steps">
<h2>First Steps<a class="headerlink" href="#first-steps" title="Permalink to this headline">Â¶</a></h2>
<p>Letâs start by heading over to the directory for our restaurant bot. All
example code snippets assume you are running the code from within that
project directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> examples/restaurantbot
</pre></div>
</div>
</div>
<div class="section" id="the-domain">
<h2>1. The Domain<a class="headerlink" href="#the-domain" title="Permalink to this headline">Â¶</a></h2>
<p>Letâs inspect the domain
definition in <code class="docutils literal notranslate"><span class="pre">restaurant_domain.yml</span></code>:</p>
<p>In addition to the previous example, there are two sections: <code class="docutils literal notranslate"><span class="pre">slots</span></code> and <code class="docutils literal notranslate"><span class="pre">entities</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">slots</span></code> are used to store user preferences, like the cuisine and price range of a restaurant.
<code class="docutils literal notranslate"><span class="pre">entities</span></code> are closely related to slots. Slots are updated over time, and entities are the raw
information thatâs picked up from user messages. But slots can also be used to store information about
the outside world, like the results of API calls, or a user profile read from a database.
Here we have a slot called <code class="docutils literal notranslate"><span class="pre">matches</span></code> which stores the matching restaurants returned by an API.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">slots</span><span class="p">:</span>
  <span class="n">cuisine</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">text</span>
  <span class="n">people</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">text</span>
  <span class="n">location</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">text</span>
  <span class="n">price</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">text</span>
  <span class="n">info</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">text</span>
  <span class="n">matches</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">unfeaturized</span>

<span class="n">entities</span><span class="p">:</span>
<span class="o">-</span> <span class="n">location</span>
<span class="o">-</span> <span class="n">info</span>
<span class="o">-</span> <span class="n">people</span>
<span class="o">-</span> <span class="n">price</span>
<span class="o">-</span> <span class="n">cuisine</span>

<span class="n">intents</span><span class="p">:</span>
 <span class="o">-</span> <span class="n">greet</span>
 <span class="o">-</span> <span class="n">affirm</span>
 <span class="o">-</span> <span class="n">deny</span>
 <span class="o">-</span> <span class="n">inform</span>
 <span class="o">-</span> <span class="n">thankyou</span>
 <span class="o">-</span> <span class="n">request_info</span>

<span class="n">templates</span><span class="p">:</span>
  <span class="n">utter_greet</span><span class="p">:</span>
    <span class="o">-</span> <span class="s2">&quot;hey there!&quot;</span>
  <span class="n">utter_goodbye</span><span class="p">:</span>
    <span class="o">-</span> <span class="s2">&quot;goodbye :(&quot;</span>
    <span class="o">-</span> <span class="s2">&quot;Bye-bye&quot;</span>
  <span class="n">utter_default</span><span class="p">:</span>
    <span class="o">-</span> <span class="s2">&quot;default message&quot;</span>
  <span class="n">utter_ack_dosearch</span><span class="p">:</span> 
    <span class="o">-</span> <span class="s2">&quot;ok let me see what I can find&quot;</span>
  <span class="n">utter_ack_findalternatives</span><span class="p">:</span>
    <span class="o">-</span> <span class="s2">&quot;ok let me see what else there is&quot;</span>
  <span class="n">utter_ack_makereservation</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">text</span><span class="p">:</span> <span class="s2">&quot;ok making a reservation&quot;</span>
      <span class="n">buttons</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">title</span><span class="p">:</span> <span class="s2">&quot;thank you&quot;</span>
          <span class="n">payload</span><span class="p">:</span> <span class="s2">&quot;thank you&quot;</span>
  <span class="n">utter_ask_cuisine</span><span class="p">:</span> 
    <span class="o">-</span> <span class="s2">&quot;what kind of cuisine would you like?&quot;</span>
  <span class="n">utter_ask_howcanhelp</span><span class="p">:</span>
    <span class="o">-</span> <span class="s2">&quot;how can I help you?&quot;</span>
  <span class="n">utter_ask_location</span><span class="p">:</span>
    <span class="o">-</span> <span class="s2">&quot;where?&quot;</span>
  <span class="n">utter_ask_moreupdates</span><span class="p">:</span> 
    <span class="o">-</span> <span class="s2">&quot;if you&#39;d like to modify anything else, please tell me what&quot;</span>
  <span class="n">utter_ask_numpeople</span><span class="p">:</span>
    <span class="o">-</span> <span class="s2">&quot;for how many people?&quot;</span>
  <span class="n">utter_ask_price</span><span class="p">:</span> 
    <span class="o">-</span> <span class="n">text</span><span class="p">:</span> <span class="s2">&quot;in which price range?&quot;</span>
      <span class="n">buttons</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">title</span><span class="p">:</span> <span class="s2">&quot;cheap&quot;</span>
        <span class="n">payload</span><span class="p">:</span> <span class="s2">&quot;cheap&quot;</span>
      <span class="o">-</span> <span class="n">title</span><span class="p">:</span> <span class="s2">&quot;expensive&quot;</span>
        <span class="n">payload</span><span class="p">:</span> <span class="s2">&quot;expensive&quot;</span>
  <span class="n">utter_on_it</span><span class="p">:</span> 
    <span class="o">-</span> <span class="s2">&quot;I&#39;m on it&quot;</span>

<span class="n">actions</span><span class="p">:</span>
<span class="o">-</span> <span class="n">utter_greet</span>
<span class="o">-</span> <span class="n">utter_goodbye</span>
<span class="o">-</span> <span class="n">utter_default</span>
<span class="o">-</span> <span class="n">utter_ack_dosearch</span>
<span class="o">-</span> <span class="n">utter_ack_findalternatives</span>
<span class="o">-</span> <span class="n">utter_ack_makereservation</span>
<span class="o">-</span> <span class="n">utter_ask_cuisine</span>
<span class="o">-</span> <span class="n">utter_ask_howcanhelp</span>
<span class="o">-</span> <span class="n">utter_ask_location</span>
<span class="o">-</span> <span class="n">utter_ask_moreupdates</span>
<span class="o">-</span> <span class="n">utter_ask_numpeople</span>
<span class="o">-</span> <span class="n">utter_ask_price</span>
<span class="o">-</span> <span class="n">utter_on_it</span>
<span class="o">-</span> <span class="n">bot</span><span class="o">.</span><span class="n">ActionSearchRestaurants</span>
<span class="o">-</span> <span class="n">bot</span><span class="o">.</span><span class="n">ActionSuggest</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="custom-actions">
<h3>Custom Actions<a class="headerlink" href="#custom-actions" title="Permalink to this headline">Â¶</a></h3>
<p>In this example we also have custom actions: <code class="docutils literal notranslate"><span class="pre">bot.ActionSearchRestaurants</span></code> and <code class="docutils literal notranslate"><span class="pre">bot.ActionSuggest</span></code>,
where <code class="docutils literal notranslate"><span class="pre">bot.</span></code> stands for the name of the module where this action is defined.
An action can do much more than just send a message.
Hereâs a small example of a custom action which calls an API.
Notice that the <code class="docutils literal notranslate"><span class="pre">run</span></code> method can use the values of the slots, which are stored in the tracker.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ActionSearchRestaurants</span><span class="p">(</span><span class="n">Action</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;action_search_restaurants&#39;</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dispatcher</span><span class="p">,</span> <span class="n">tracker</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
        <span class="n">dispatcher</span><span class="o">.</span><span class="n">utter_message</span><span class="p">(</span><span class="s2">&quot;looking for restaurants&quot;</span><span class="p">)</span>
        <span class="n">restaurant_api</span> <span class="o">=</span> <span class="n">RestaurantAPI</span><span class="p">()</span>
        <span class="n">restaurants</span> <span class="o">=</span> <span class="n">restaurant_api</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">tracker</span><span class="o">.</span><span class="n">get_slot</span><span class="p">(</span><span class="s2">&quot;cuisine&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">SlotSet</span><span class="p">(</span><span class="s2">&quot;matches&quot;</span><span class="p">,</span> <span class="n">restaurants</span><span class="p">)]</span>
</pre></div>
</td></tr></table></div>
<p>But a domain alone doesnât make a bot; we need some training data to tell the
bot which actions it should execute at what point in the conversation.
We need some conversation training data - the <em>stories</em>!</p>
</div>
</div>
<div class="section" id="the-training-data">
<h2>2. The Training Data<a class="headerlink" href="#the-training-data" title="Permalink to this headline">Â¶</a></h2>
<p>Take a look at <code class="docutils literal notranslate"><span class="pre">data/babi_stories.md</span></code>, where the training conversations
for the restaurant bot are defined. One example story looks as follows:</p>
<div class="highlight-md notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gu">##</span> story_00914561
<span class="k">*</span> greet
 <span class="k">-</span> utter_ask_howcanhelp
<span class="k">*</span> inform{&quot;cuisine&quot;: &quot;italian&quot;}
 <span class="k">-</span> utter_on_it
 <span class="k">-</span> utter_ask_location
<span class="k">*</span> inform{&quot;location&quot;: &quot;paris&quot;}
 <span class="k">-</span> utter_ask_numpeople
<span class="k">*</span> inform{&quot;people&quot;: &quot;six&quot;}
 <span class="k">-</span> utter_ask_price
 ...
</pre></div>
</td></tr></table></div>
<p>See <a class="reference internal" href="#training-data-details"><span class="std std-ref">Training Data</span></a> below to get more information about this
training data.</p>
</div>
<div class="section" id="training-your-bot">
<h2>3. Training your bot<a class="headerlink" href="#training-your-bot" title="Permalink to this headline">Â¶</a></h2>
<p>We can go directly from data to bot with only a few steps:</p>
<ol class="arabic simple">
<li>Train a Rasa NLU model to extract intents and entities. Read more about that in the <a class="reference external" href="http://rasa-nlu.readthedocs.io/">NLU docs</a>.</li>
<li>Train a dialogue policy which will learn to choose the correct actions.</li>
<li>Set up an agent which has both model 1 (the NLU) and model 2 (the dialogue) working together to go directly from <strong>user input</strong> to <strong>action</strong>.</li>
</ol>
<p>We will go through these steps one by one.</p>
<div class="section" id="nlu-model">
<h3>NLU model<a class="headerlink" href="#nlu-model" title="Permalink to this headline">Â¶</a></h3>
<p>To train our Rasa NLU model, we need a configuration file, which you can
find in <code class="docutils literal notranslate"><span class="pre">nlu_model_config.yml</span></code>:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">pipeline</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;nlp_spacy&quot;</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;tokenizer_spacy&quot;</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;intent_featurizer_spacy&quot;</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;intent_classifier_sklearn&quot;</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;ner_crf&quot;</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;ner_synonyms&quot;</span>
</pre></div>
</td></tr></table></div>
<p>And training data <code class="docutils literal notranslate"><span class="pre">franken_data.json</span></code> (see
<a class="reference external" href="https://nlu.rasa.com/dataformat.html">NLU Dataformat</a> for details
about the training data format).</p>
<p>We can train the NLU model using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m rasa_nlu.train -c nlu_model_config.yml --fixed_model_name current <span class="se">\</span>
       --data ./data/franken_data.json --path ./models/nlu
</pre></div>
</div>
<p>or using python code</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">train_nlu</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">rasa_nlu.training_data</span> <span class="k">import</span> <span class="n">load_data</span>
    <span class="kn">from</span> <span class="nn">rasa_nlu</span> <span class="k">import</span> <span class="n">config</span>
    <span class="kn">from</span> <span class="nn">rasa_nlu.model</span> <span class="k">import</span> <span class="n">Trainer</span>

    <span class="n">training_data</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s1">&#39;data/franken_data.json&#39;</span><span class="p">)</span>
    <span class="n">trainer</span> <span class="o">=</span> <span class="n">Trainer</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;nlu_model_config.yml&quot;</span><span class="p">))</span>
    <span class="n">trainer</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">training_data</span><span class="p">)</span>
    <span class="n">model_directory</span> <span class="o">=</span> <span class="n">trainer</span><span class="o">.</span><span class="n">persist</span><span class="p">(</span><span class="s1">&#39;models/nlu/&#39;</span><span class="p">,</span>
                                      <span class="n">fixed_model_name</span><span class="o">=</span><span class="s2">&quot;current&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">model_directory</span>
</pre></div>
</td></tr></table></div>
<p>and calling</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python bot.py train-nlu
</pre></div>
</div>
<p><em>Training NLU takes approximately 18 seconds on a 2014 MacBook Pro.</em></p>
</div>
<div class="section" id="a-custom-dialogue-policy">
<h3>A Custom Dialogue Policy<a class="headerlink" href="#a-custom-dialogue-policy" title="Permalink to this headline">Â¶</a></h3>
<p>Now our bot needs to learn what to do in response to user messages. We do
this by training one or multiple Rasa Core policies.</p>
<p>For this bot, we came up with our own policy.
This policy extends the Keras policy modifying the ML architecture of the
underlying neural network.
Check out the
<code class="docutils literal notranslate"><span class="pre">RestaurantPolicy</span></code> class in <code class="docutils literal notranslate"><span class="pre">policy.py</span></code> for the glory details:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">RestaurantPolicy</span><span class="p">(</span><span class="n">KerasPolicy</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">model_architecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_shape</span><span class="p">,</span> <span class="n">output_shape</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Build a Keras model and return a compiled model.&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">keras.layers</span> <span class="k">import</span> <span class="n">LSTM</span><span class="p">,</span> <span class="n">Activation</span><span class="p">,</span> <span class="n">Masking</span><span class="p">,</span> <span class="n">Dense</span>
        <span class="kn">from</span> <span class="nn">keras.models</span> <span class="k">import</span> <span class="n">Sequential</span>

        <span class="kn">from</span> <span class="nn">keras.models</span> <span class="k">import</span> <span class="n">Sequential</span>
        <span class="kn">from</span> <span class="nn">keras.layers</span> <span class="k">import</span> \
            <span class="n">Masking</span><span class="p">,</span> <span class="n">LSTM</span><span class="p">,</span> <span class="n">Dense</span><span class="p">,</span> <span class="n">TimeDistributed</span><span class="p">,</span> <span class="n">Activation</span>

        <span class="c1"># Build Model</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Sequential</span><span class="p">()</span>

        <span class="c1"># the shape of the y vector of the labels,</span>
        <span class="c1"># determines which output from rnn will be used</span>
        <span class="c1"># to calculate the loss</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">output_shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># y is (num examples, num features) so</span>
            <span class="c1"># only the last output from the rnn is used to</span>
            <span class="c1"># calculate the loss</span>
            <span class="n">model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Masking</span><span class="p">(</span><span class="n">mask_value</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">input_shape</span><span class="o">=</span><span class="n">input_shape</span><span class="p">))</span>
            <span class="n">model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LSTM</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rnn_size</span><span class="p">))</span>
            <span class="n">model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Dense</span><span class="p">(</span><span class="n">input_dim</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rnn_size</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="n">output_shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">output_shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c1"># y is (num examples, max_dialogue_len, num features) so</span>
            <span class="c1"># all the outputs from the rnn are used to</span>
            <span class="c1"># calculate the loss, therefore a sequence is returned and</span>
            <span class="c1"># time distributed layer is used</span>

            <span class="c1"># the first value in input_shape is max dialogue_len,</span>
            <span class="c1"># it is set to None, to allow dynamic_rnn creation</span>
            <span class="c1"># during prediction</span>
            <span class="n">model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Masking</span><span class="p">(</span><span class="n">mask_value</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
                              <span class="n">input_shape</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">input_shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
            <span class="n">model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LSTM</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rnn_size</span><span class="p">,</span> <span class="n">return_sequences</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
            <span class="n">model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">TimeDistributed</span><span class="p">(</span><span class="n">Dense</span><span class="p">(</span><span class="n">units</span><span class="o">=</span><span class="n">output_shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot construct the model because&quot;</span>
                             <span class="s2">&quot;length of output_shape = </span><span class="si">{}</span><span class="s2"> &quot;</span>
                             <span class="s2">&quot;should be 1 or 2.&quot;</span>
                             <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">output_shape</span><span class="p">)))</span>

        <span class="n">model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Activation</span><span class="p">(</span><span class="s1">&#39;softmax&#39;</span><span class="p">))</span>

        <span class="n">model</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">loss</span><span class="o">=</span><span class="s1">&#39;categorical_crossentropy&#39;</span><span class="p">,</span>
                      <span class="n">optimizer</span><span class="o">=</span><span class="s1">&#39;adam&#39;</span><span class="p">,</span>
                      <span class="n">metrics</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;accuracy&#39;</span><span class="p">])</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">model</span>
</pre></div>
</td></tr></table></div>
<p>The parameters <code class="docutils literal notranslate"><span class="pre">max_history_len</span></code> and <code class="docutils literal notranslate"><span class="pre">n_hidden</span></code>
may be altered dependent on the task complexity and the amount of data one
has. <code class="docutils literal notranslate"><span class="pre">max_history_len</span></code> is important as it is the amount of previous story steps the
network has access to make a classification.</p>
<p>Because weâve created a custom policy, we canât train the bot by running <code class="docutils literal notranslate"><span class="pre">rasa_core.train</span></code>
like in the <span class="xref std std-ref">tutorial_basics</span>. The <code class="docutils literal notranslate"><span class="pre">bot.py</span></code> script shows how you can
train a bot that uses a custom policy and actions.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Remember, you do not need to create your own policy. The default policy
setup using a <em>memoization</em> policy and a <em>Keras</em> policy works quite well.
Nevertheless, you can always fine tune them for your use case. Read
<span class="xref std std-ref">plumbing</span> for more info.</p>
</div>
<p>Now letâs train it:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">train_dialogue</span><span class="p">(</span><span class="n">domain_file</span><span class="o">=</span><span class="s2">&quot;restaurant_domain.yml&quot;</span><span class="p">,</span>
                   <span class="n">model_path</span><span class="o">=</span><span class="s2">&quot;models/dialogue&quot;</span><span class="p">,</span>
                   <span class="n">training_data_file</span><span class="o">=</span><span class="s2">&quot;data/babi_stories.md&quot;</span><span class="p">):</span>
    <span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">domain_file</span><span class="p">,</span>
                  <span class="n">policies</span><span class="o">=</span><span class="p">[</span><span class="n">MemoizationPolicy</span><span class="p">(</span><span class="n">max_history</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
                            <span class="n">RestaurantPolicy</span><span class="p">()])</span>

    <span class="n">training_data</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="n">training_data_file</span><span class="p">)</span>
    <span class="n">agent</span><span class="o">.</span><span class="n">train</span><span class="p">(</span>
            <span class="n">training_data</span><span class="p">,</span>
            <span class="n">epochs</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
            <span class="n">batch_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
            <span class="n">validation_split</span><span class="o">=</span><span class="mf">0.2</span>
    <span class="p">)</span>

    <span class="n">agent</span><span class="o">.</span><span class="n">persist</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">agent</span>
</pre></div>
</td></tr></table></div>
<p>This code creates the policies to be trained and uses the story training
data to train and persist (store) a model. The goal of the trained policy
is to predict the next action, given the current state of the bot.</p>
<p>To train the dialogue policy from the command line, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python bot.py train-dialogue
</pre></div>
</div>
<p><em>Training the dialogue model takes roughly 12 minutes on a 2014 MacBook Pro</em></p>
</div>
</div>
<div class="section" id="using-the-bot">
<h2>4. Using the bot<a class="headerlink" href="#using-the-bot" title="Permalink to this headline">Â¶</a></h2>
<p>Now weâre going to glue some pieces together to create an actual bot.
We instantiate an <code class="docutils literal notranslate"><span class="pre">Agent</span></code>, which owns our trained <code class="docutils literal notranslate"><span class="pre">Policy</span></code>, a <code class="docutils literal notranslate"><span class="pre">Domain</span></code> from <code class="docutils literal notranslate"><span class="pre">models/dialogue</span></code>,
and our NLU <code class="docutils literal notranslate"><span class="pre">Interpreter</span></code> from <code class="docutils literal notranslate"><span class="pre">models/nlu/default/current</span></code>.</p>
<p>For this demonstration, we will send messages directly to the bot out of a
python console. You can look at how to build a command line bot and a
facebook bot by checking out the <a class="reference internal" href="../connectors/#connectors"><span class="std std-ref">Chat &amp; Voice platforms</span></a>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="go">from rasa_core.interpreter import RasaNLUInterpreter</span>
<span class="go">from rasa_core.agent import Agent</span>

<span class="go">agent = Agent.load(&quot;models/dialogue&quot;, interpreter=RasaNLUInterpreter(&quot;models/nlu/default/current&quot;))</span>
</pre></div>
</div>
<p>We can then try sending it a message:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">agent</span><span class="o">.</span><span class="n">handle_message</span><span class="p">(</span><span class="s2">&quot;/greet&quot;</span><span class="p">)</span>
<span class="go">[u&#39;hey there!&#39;]</span>
</pre></div>
</div>
<p>And there we have it! A minimal bot containing all the important pieces of
Rasa Core.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Here, weâve skipped the NLU interpretation of our message by directly
providing the underlying intent <code class="docutils literal notranslate"><span class="pre">greet</span></code> (see
<a class="reference internal" href="../api/interpreter/#fixed-intent-format"><span class="std std-ref">Buttons and other Structured Input</span></a>).</p>
</div>
<p>If you want to handle input from the command line (or a different input
channel) you need handle that channel instead of handling messages directly,
e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rasa_core.channels.console</span> <span class="kn">import</span> <span class="n">ConsoleInputChannel</span>
<span class="n">agent</span><span class="o">.</span><span class="n">handle_channel</span><span class="p">(</span><span class="n">ConsoleInputChannel</span><span class="p">())</span>
</pre></div>
</div>
<p>In this case messages will be retrieved from the command line because we specified
the <code class="docutils literal notranslate"><span class="pre">ConsoleInputChannel</span></code>. Responses are printed to the command line as well.</p>
<p>You can find a complete example of how to load an agent and chat with it on the
command line in the restaurant botâs <code class="docutils literal notranslate"><span class="pre">bot.py</span></code> <code class="docutils literal notranslate"><span class="pre">run</span></code> method.
To run the bot from the command line, call</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python bot.py run
</pre></div>
</div>
<p>If the bot appears to be stuck or answers incorrectly, do not worry.
The provided dataset is not diverse enough to handle all possible inputs,
as can be seen from visualization of the training data below.
One can use <span class="xref std std-ref">tutorial_interactive_learning</span> to augment the training data
with custom stories.</p>
</div>
<div class="section" id="the-details">
<h2>The Details<a class="headerlink" href="#the-details" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="training-data">
<span id="training-data-details"></span><h3>Training Data<a class="headerlink" href="#training-data" title="Permalink to this headline">Â¶</a></h3>
<p>The training conversations come from the <a class="reference external" href="https://research.fb.com/downloads/babi/">bAbI dialog task</a>. However, the messages in these
dialogues are machine generated, so we will augment this dataset with real
user messages from the <a class="reference external" href="http://camdial.org/~mh521/dstc/">DSTC dataset</a>.
Lucky for us, this dataset is also in the restaurant domain.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The bAbI dataset is machine-generated, and there are a LOT of dialogues in
there. There are 1000 stories in the training set, but you donât need that
many to build a useful bot. How much data you need depends on the number of
actions you define, and the number of edge cases you want to support. But a
few dozen stories is a good place to start.</p>
</div>
<p>We have converted the bAbI dialogue training set into the Rasa stories
format, and you can download the stories training data from <a class="reference external" href="https://raw.githubusercontent.com/RasaHQ/rasa_core/master/examples/restaurantbot/data/babi_stories.md">GitHub</a>. That file is stored in
<code class="docutils literal notranslate"><span class="pre">data/babi_stories.md</span></code>.</p>
<p>See <a class="reference internal" href="../stories/#stories"><span class="std std-ref">Story Data Format</span></a> to get more information about the Rasa Core data format.
We can also visualize that training data to generate a graph which is
similar to a flow chart:</p>
<img alt="../_images/babi_flow.png" src="../_images/babi_flow.png" />
<p>The graph shows all of the actions executed in the training data, and the
user messages (if any) that occurred between them. As you can see, flow
charts get complicated quite quickly. Nevertheless, they can be a helpful
tool in debugging a bot. For example, it can be clearly seen that there is
not enough data for handling reservation. To learn how to build this chart go to
<a class="reference internal" href="../debugging/#story-visualization"><span class="std std-ref">Visualizing your Stories</span></a>.</p>
<div class="rating-container">
    <div class="rating-text">
      <p> How was the tutorial? Click to Vote </p>
    </div>
      <form class="rating-form">
        <label for="great" onclick="gtag('event', 'docs_tutorial_satisfaction', { event_category: 'core_docs_satisfaction', event_action: 'click', event_label: 'great'} );">
            <input type="radio" name="rating" class="great" id="great" value="great" />
            <svg viewBox="0 0 24 24"><path d="M12,17.5C14.33,17.5 16.3,16.04 17.11,14H6.89C7.69,16.04 9.67,17.5 12,17.5M8.5,11A1.5,1.5 0 0,0 10,9.5A1.5,1.5 0 0,0 8.5,8A1.5,1.5 0 0,0 7,9.5A1.5,1.5 0 0,0 8.5,11M15.5,11A1.5,1.5 0 0,0 17,9.5A1.5,1.5 0 0,0 15.5,8A1.5,1.5 0 0,0 14,9.5A1.5,1.5 0 0,0 15.5,11M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" /></svg>
            <span style="display: block;"> Great! </span>
        </label>

        <label for="didnt-work" onclick="gtag('event', 'docs_tutorial_satisfaction', { event_category: 'core_docs_satisfaction', event_action: 'click', event_label: 'didnt-work'} );">
            <input type="radio" name="rating" class="didnt-work" id="didnt-work" value="didnt-work" />
            <svg viewBox="0 0 24 24"><path d="M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M16.18,7.76L15.12,8.82L14.06,7.76L13,8.82L14.06,9.88L13,10.94L14.06,12L15.12,10.94L16.18,12L17.24,10.94L16.18,9.88L17.24,8.82L16.18,7.76M7.82,12L8.88,10.94L9.94,12L11,10.94L9.94,9.88L11,8.82L9.94,7.76L8.88,8.82L7.82,7.76L6.76,8.82L7.82,9.88L6.76,10.94L7.82,12M12,14C9.67,14 7.69,15.46 6.89,17.5H17.11C16.31,15.46 14.33,14 12,14Z" /></svg>
            <span style="display: block;"> Didn't Work </span>
        </label>

        <label for="didnt-finish" onclick="gtag('event', 'docs_tutorial_satisfaction', { event_category: 'core_docs_satisfaction', event_action: 'click', event_label: 'didnt-finish'} );">
            <input type="radio" name="rating" class="didnt-finish" id="didnt-finish" value="didnt-finish" />
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="100%" height="100%" viewBox="0 0 24 24"><path d="M8.5,11A1.5,1.5 0 0,1 7,9.5A1.5,1.5 0 0,1 8.5,8A1.5,1.5 0 0,1 10,9.5A1.5,1.5 0 0,1 8.5,11M15.5,11A1.5,1.5 0 0,1 14,9.5A1.5,1.5 0 0,1 15.5,8A1.5,1.5 0 0,1 17,9.5A1.5,1.5 0 0,1 15.5,11M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M9,14H15A1,1 0 0,1 16,15A1,1 0 0,1 15,16H9A1,1 0 0,1 8,15A1,1 0 0,1 9,14Z" /></svg>
            <span style="display: block;"> Didn't Finish </span>
        </label>

      </form>
    </div>

</div>
</div>
</div>


	    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
	    <script type="text/javascript"> docsearch({
	    âapiKey: '1f9e0efb89e98543f6613a60f847b176',
	    âindexName: 'rasa',
	    âinputSelector: 'body > div.nav-top > .nav-container > .nav > input',
	    âdebug: false // Set debug to true if you want to inspect the dropdown
	    });
	    </script>
          </div>

          <div class="footer">

            <div class="social">
              <a href="https://github.com/RasaHQ" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
              <a href="https://stackoverflow.com/search?q=rasa" target="_blank" title="Stack Overflow"><i class="fab fa-stack-overflow"></i></a>
              <a href="https://www.youtube.com/channel/UCJ0V6493mLvqdiVwOKWBODQ" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
              <a href="https://twitter.com/rasa_hq" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a>
            </div>

            <div class="copyright small">
            &copy;2018, Rasa Technologies GmbH | <a href="https://rasa.com/imprint/" target="_blank">Imprint</a> | <a href="https://rasa.com/privacy-policy/" target="_blank">Privacy Policy</a>
            
            </div>

          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>

    

  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag(...arguments) {
      dataLayer.push(...arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-87333416-1', {
      'anonymize_ip': true,
    });
  </script>
  <script src="https://rasa.com/assets/js/js.cookies.js"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script type="opt-in" data-name="googleanalytics" data-type="text/javascript" data-src="https://www.googletagmanager.com/gtag/js?id=UA-87333416-1"></script>
  <script type="opt-in" data-name="googleanalytics" data-type="text/javascript" data-src="https://rasa.com/assets/js/userId.js"></script>

  <script type="text/javascript">
    var clipboard = new ClipboardJS('.copyable');
    clipboard.on('success', function(e) {
      gtag('event', e.action, {
        'event_category': 'code',
        'event_label': e.text
      });
      const id = e.text.replace(' ','-');
      document.getElementById(id).classList.add('visible');
      setTimeout(function(){
        document.getElementById(id).classList.remove('visible');},
        800
      );
    });
    clipboard.on('error', function(e) {
      console.log(e);
    });
  </script>

  <!-- onsite anchor fix (otherwise anchors scroll to far) -->
  <script>
    /* Adapted from https://stackoverflow.com/a/13067009/1906073 */
    (function(document, history, location) {
      var HISTORY_SUPPORT = !!(history && history.pushState);

      var anchorScrolls = {
        ANCHOR_REGEX: /^#[^ ]+$/,
        OFFSET_HEIGHT_PX: 66,

        /**
         * Establish events, and fix initial scroll position if a hash is provided.
         */
        init: function() {
          this.scrollToCurrent();
          $(window).on('hashchange', $.proxy(this, 'scrollToCurrent'));
          $('body').on('click', 'a', $.proxy(this, 'delegateAnchors'));
        },

        /**
         * Return the offset amount to deduct from the normal scroll position.
         * Modify as appropriate to allow for dynamic calculations
         */
        getFixedOffset: function() {
          return this.OFFSET_HEIGHT_PX;
        },

        /**
         * If the provided href is an anchor which resolves to an element on the
         * page, scroll to it.
         * @param  {String} href
         * @return {Boolean} - Was the href an anchor.
         */
        scrollIfAnchor: function(href, pushToHistory) {
          var match, anchorOffset;

          if(!this.ANCHOR_REGEX.test(href)) {
            return false;
          }

          match = document.getElementById(href.slice(1));

          if(match) {
            anchorOffset = $(match).offset().top - this.getFixedOffset();
            $('html, body').animate({ scrollTop: anchorOffset});

            // Add the state to history as-per normal anchor links
            if(HISTORY_SUPPORT && pushToHistory) {
              history.pushState({}, document.title, location.pathname + href);
            }
          }

          return !!match;
        },

        /**
         * Attempt to scroll to the current location's hash.
         */
        scrollToCurrent: function(e) {
          if(this.scrollIfAnchor(window.location.hash) && e) {
            e.preventDefault();
          }
        },

        /**
         * If the click event's target was an anchor, fix the scroll position.
         */
        delegateAnchors: function(e) {
          var elem = e.target;

          if(this.scrollIfAnchor(elem.getAttribute('href'), true)) {
            e.preventDefault();
          }
        }
      };

      $(document).ready($.proxy(anchorScrolls, 'init'));
    })(window.document, window.history, window.location);

  </script>
  </body>
</html>